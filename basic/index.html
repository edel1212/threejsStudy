<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <canvas id="c"></canvas>

    <script type="module">
        import * as THREE from 'https://unpkg.com/three/build/three.module.js';
        
        // Renderer ê°ì²´ ìƒì„±
        const renderer = new THREE.WebGLRenderer({
            antialias : true,                       // ê³„ë‹¨í˜„ìƒ ì œê±°  
            canvas : document.querySelector("#c")   // ëŒ€ìƒ ìº”ë²„ìŠ¤ ì§€ì •        
        });

        // ì¹´ë©”ë¼ ê°ì²´ ìƒì„±
        const fov       =  75   ; // ì›ê·¼ ì¹´ë©”ë¼ ê°ë„
        const aspect    = 2     ; // ìº”ë²„ìŠ¤ì˜ ë””ìŠ¤í”Œë ˆì´ ì¸¡ë©´
        const near      = 0.1   ; // ê°€ê¹Œìš´ ê±°ë¦¬ - ë³´ë‹¤ ìž‘ì„ê²½ìš° ê·¸ë¦¬ì§€ ì•ŠìŒ
        const far       = 5     ; // ë¨¼ê±°ë¦¬     - ë³´ë‹¤ í´ê²½ìš° ê·¸ë¦¬ì§€ ì•ŠìŒ
        const camera = new THREE.PerspectiveCamera(fov,aspect, near, far);
        camera.position.z = 2;

        // ìž¥ë©´ ê°ì²´ ìƒì„±
        const scene = new THREE.Scene();

        // ëª¨ì–‘ ì •ì˜ - Three.jsì—ì„œ í‘œì‹œí•˜ë ¤ëŠ” ê±°ì˜ ëª¨ë“  ê²ƒì€ 3Dê°œì²´ë¥¼ êµ¬ì„±í•˜ëŠ” ì •ì ì„ ì •ì˜í•´ ì¤˜ì•¼í•¨ [ðŸ‘‰ë¬¼ì²´ì˜ ëª¨ì–‘]
        const boxWidth = 1;
        const boxHeight = 1;
        const boxDepth = 1;
        const geometry = new THREE.BoxGeometry(boxWidth, boxHeight, boxDepth);
 
        // 3D íë¸Œì˜ ìž¬ì§ˆ ì„¤ì • [ðŸ‘‰ë¬¼ì²´ë¥¼ ê·¸ë¦¬ëŠ” ë°©ë²•, ê´‘íƒ ë˜ëŠ” í‰ë©´, ìƒ‰ìƒ, ì ìš©í•  í…ìŠ¤ì²˜ ë“±]
        //const material = new THREE.MeshBasicMaterial({color: 0x44aa88}); //âŒ í•´ë‹¹ ìž¬ì§ˆì€ ë¹›ì´ ë°˜ì‚¬ë˜ì§€ ì•ŠìŒ 
        const material = new THREE.MeshPhongMaterial({color: 0x44aa88});

        // ì¡°ëª… ì¶”ê°€
        const color = 0xFFFFFF;        // ì¡°ëª… ìƒ‰ìƒ
        const intensity = 1;         // ë°ê¸° ê°•ë„
        const light = new THREE.DirectionalLight(color, intensity);
        light.position.set(-1,2,4);    // ì¡°ëª… ìœ„ì¹˜ ì„¤ì •
        scene.add(light);             // ìž¥ë©´ì— ì¡°ëª… ì¶”ê°€

        // íë·° ìƒì„± ì¸ìŠ¤í„´ìŠ¤
        function  makeInstance(geomerty, color , x){
            const meterial = new THREE.MeshPhongMaterial({color});
            const cube = new THREE.Mesh(geomerty, meterial);
            scene.add(cube);

            cube.position.x = x;
            return cube;
        }

        // íë¸Œ ë°°ì—´ ìƒì„±
        const cubes = [ makeInstance(geometry, 0x44aa88,  0)
                        , makeInstance(geometry, 0x8844aa, -2)
                        , makeInstance(geometry, 0xaa8844,  2) ];

        // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ ì¶”ê°€
        function animationFunc(time){
            time *= 0.001;

            cubes.forEach((cube, ndx) => {
                const speed = 1 + ndx * .1;
                const rot = time * speed;
                cube.rotation.x = rot;
                cube.rotation.y = rot;
            });
            renderer.render(scene, camera);

            requestAnimationFrame(animationFunc);
        }
        animationFunc(20);

    </script>

</body>
</html>